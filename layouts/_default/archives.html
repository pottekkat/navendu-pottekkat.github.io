{{- define "main" }}

<header class="page-header">
  <h1>{{ .Title }}</h1>
</header>

<ul class="section-links-archive">
  <li>
    <a href="/dailies/">
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 10.5 12" width="10.5" height="12">
          <path d="M3 0c.415 0 .75.335.75.75v.75h3V.75a.749.749 0 1 1 1.5 0v.75h1.125c.621 0 1.125.504 1.125 1.125V3.75H0V2.625C0 2.004.504 1.5 1.125 1.5H2.25V.75C2.25.335 2.585 0 3 0M0 4.5h10.5v6.375c0 .621-.504 1.125-1.125 1.125h-8.25A1.125 1.125 0 0 1 0 10.875zm1.5 1.875v.75a.377.377 0 0 0 .375.375h.75A.377.377 0 0 0 3 7.125v-.75A.377.377 0 0 0 2.625 6h-.75a.377.377 0 0 0-.375.375m3 0v.75a.377.377 0 0 0 .375.375h.75A.377.377 0 0 0 6 7.125v-.75A.377.377 0 0 0 5.625 6h-.75a.377.377 0 0 0-.375.375M7.875 6a.377.377 0 0 0-.375.375v.75a.377.377 0 0 0 .375.375h.75A.377.377 0 0 0 9 7.125v-.75A.377.377 0 0 0 8.625 6zM1.5 9.375v.75a.377.377 0 0 0 .375.375h.75A.377.377 0 0 0 3 10.125v-.75A.377.377 0 0 0 2.625 9h-.75a.377.377 0 0 0-.375.375M4.875 9a.377.377 0 0 0-.375.375v.75a.377.377 0 0 0 .375.375h.75A.377.377 0 0 0 6 10.125v-.75A.377.377 0 0 0 5.625 9zm2.625.375v.75a.377.377 0 0 0 .375.375h.75A.377.377 0 0 0 9 10.125v-.75A.377.377 0 0 0 8.625 9h-.75a.377.377 0 0 0-.375.375"></path>
        </svg>
        Dailies</span>
    </a>
  </li>
  <li>
    <a href="/newsletters/">
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0.75 12 10.5" width="13.71" height="12">
          <path d="M2.25 2.25c0-.827.673-1.5 1.5-1.5h6.75c.827 0 1.5.673 1.5 1.5v7.5c0 .827-.673 1.5-1.5 1.5H1.875A1.874 1.874 0 0 1 0 9.375V3a.749.749 0 1 1 1.5 0v6.375c0 .206.169.375.375.375s.375-.169.375-.375zm1.5.563v1.875c0 .312.251.563.563.563h2.625a.56.56 0 0 0 .563-.563V2.813a.56.56 0 0 0-.563-.563H4.313a.56.56 0 0 0-.563.563m4.875-.188c0 .206.169.375.375.375h1.125c.206 0 .375-.169.375-.375s-.169-.375-.375-.375H9a.376.376 0 0 0-.375.375m0 2.25c0 .206.169.375.375.375h1.125c.206 0 .375-.169.375-.375s-.169-.375-.375-.375H9a.376.376 0 0 0-.375.375M3.75 7.125c0 .206.169.375.375.375h6c.206 0 .375-.169.375-.375s-.169-.375-.375-.375h-6a.376.376 0 0 0-.375.375m0 2.25c0 .206.169.375.375.375h6c.206 0 .375-.169.375-.375S10.331 9 10.125 9h-6a.376.376 0 0 0-.375.375"></path>
        </svg>
        Newsletters</span>
    </a>
  </li>
  <li>
    <a href="/playgrounds/">
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0.75 10.5 10.5" width="12" height="12">
          <path d="M0 2.25C0 1.423.673.75 1.5.75H9c.827 0 1.5.673 1.5 1.5v7.5c0 .827-.673 1.5-1.5 1.5H1.5c-.827 0-1.5-.673-1.5-1.5zm3.75 1.5a.75.75 0 1 0-1.5 0 .75.75 0 1 0 1.5 0m-.75 3a.75.75 0 1 0 0-1.5.75.75 0 1 0 0 1.5m.75 1.5a.75.75 0 1 0-1.5 0 .75.75 0 1 0 1.5 0M7.5 4.5a.75.75 0 1 0 0-1.5.75.75 0 1 0 0 1.5M8.25 6a.75.75 0 1 0-1.5 0 .75.75 0 1 0 1.5 0M7.5 9a.75.75 0 1 0 0-1.5.75.75 0 1 0 0 1.5"></path>
        </svg>
        Playgrounds</span>
    </a>
  </li>
  <li>
    <a href="/tils/">
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0.75 15 10.5" width="17.14" height="12">
          <path d="M7.5.75q-.287 0-.555.096L.37 3.22a.565.565 0 0 0 0 1.06l1.357.49a3.86 3.86 0 0 0-.602 2.071V7.5c0 .666-.253 1.352-.523 1.894a6 6 0 0 1-.527.881c-.075.101-.096.232-.054.352s.141.209.262.239l1.5.375a.374.374 0 0 0 .457-.291 6 6 0 0 0-.049-2.548 5.2 5.2 0 0 0-.316-.984v-.577c0-.708.239-1.376.654-1.91a2.9 2.9 0 0 1 1.153-.837l3.68-1.446a.375.375 0 0 1 .274.696L3.956 4.79a2.2 2.2 0 0 0-.755.506l3.741 1.35a1.67 1.67 0 0 0 1.11 0l6.577-2.367a.565.565 0 0 0 0-1.06L8.055.846A1.7 1.7 0 0 0 7.5.75M3 9.563c0 .827 2.016 1.688 4.5 1.688s4.5-.86 4.5-1.688l-.359-3.408-3.332 1.204a2.38 2.38 0 0 1-1.618 0L3.358 6.154z"></path>
        </svg>
        TILs</span>
    </a>
  </li>
</ul>

<div id="searchbox">
  <input id="searchInput" autofocus placeholder="{{ .Params.placeholder | default (printf "%s" .Title) }}"
      aria-label="search" type="search" autocomplete="off" data-omit="dailies, newsletters, playgrounds, tils">
  <ul id="searchResults" aria-label="search results"></ul>
</div>

{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}

{{- if site.Params.ShowAllPagesInArchive }}
{{- $pages = site.RegularPages }}
{{- end }}

{{- range $pages.GroupByPublishDate "2006" }}
{{- if ne .Key "0001" }}
<div class="archive-year">
  <h2 class="archive-year-header">
    {{- replace .Key "0001" "" }}<sup class="archive-count">&nbsp;&nbsp;{{ len .Pages }}</sup>
  </h2>
  {{- range .Pages.GroupByDate "January" }}
  <div class="archive-month">
    <h3 class="archive-month-header">{{- .Key }}<sup class="archive-count">&nbsp;&nbsp;{{ len .Pages }}</sup></h3>
    <div class="archive-posts">
      {{- range .Pages }}
      {{- if eq .Kind "page" }}
      <div class="archive-entry">
        <h3 class="archive-entry-title">
          {{- .Title | markdownify }}
          {{- if .Draft }}<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup>{{- end }}
        </h3>
        <div class="archive-meta">
          {{- partial "post_meta.html" . -}}
        </div>
        <a class="entry-link" aria-label="post link to {{ .Title | plainify }}" href="{{ .Permalink }}"></a>
      </div>
      {{- end }}
      {{- end }}
    </div>
  </div>
  {{- end }}
</div>
{{- end }}
{{- end }}

{{- end }}{{/* end main */}}
